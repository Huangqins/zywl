webpackJsonp([10],{GdsT:function(t,e){},HRKt:function(t,e,a){"use strict";e.a=function(t){var e=t.userName,a=t.rows,i=t.page,o=t.taskId,r=t.targetId;return Object(n.a)({url:"/ZY/vuln/vulnSearch",method:"post",data:{userName:e,rows:a,page:i,taskId:o,targetId:r}})};var n=a("vLgD")},SDVq:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("lC5x"),i=a.n(n),o=a("J0Oq"),r=a.n(o),s=a("aA9S"),l=a.n(s),u=a("4YfN"),c=a.n(u),d=a("StQU"),h=a("sxu/"),p=a("rMqN"),f=a("9rMa"),v=a("vLgD");function g(t){var e=t.target_id,a=t.flag,n=void 0===a?1:a;return Object(v.a)({method:"post",url:"/ZY/task/timeLine",data:{target_id:e,flag:n}})}var m=a("HRKt"),w=new Date,x=(w.getFullYear(),w.getMonth(),w.getDate(),w.getHours(),w.getMinutes(),w.getSeconds(),{4:"紧急风险",3:"高风险",2:"中风险",1:"低风险",0:"无风险"}),k={components:{chart:d.a,page:h.a},data:function(){return{width:"800px",loading:!1,assetsList:[],total:0,defaultPage:{area:1,rows:10,page:1},assetsColums:[{title:"漏洞名称",key:"vuln_name",align:"center"},{title:"漏洞类型",key:"vuln_type",align:"center"},{title:"漏洞等级",key:"vuln_level",align:"center",render:function(t,e){return t("span",""+x[e.row.vuln_level])}},{title:"payload",key:"vuln_Payload",align:"center"},{title:"操作人",key:"vuln_oper",align:"center"}],id:"",taskInfo:[],timer:"",mock:"",linechartdata:[],linechart:{title:{text:"任务漏洞折线图",textStyle:{color:"#E4E5E5"}},tooltip:{trigger:"axis",axisPointer:{animation:!1}},xAxis:{type:"time",splitLine:{show:!1},axisLine:{lineStyle:{color:"#E4E5E5"}}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1},axisLine:{lineStyle:{color:"white"}}},series:[{name:"模拟数据",type:"line",showSymbol:!1,hoverAnimation:!1,linechartdata:[]}]},option:{tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"业务指标",type:"gauge",radius:"85%",detail:{formatter:"{value}%",fontSize:20},data:[{value:0,name:"完成率"}],title:{color:"#E4E5E5",fontSize:12},splitLine:{show:!1},axisTick:{show:!1},pointer:{show:!1},axisLabel:{show:!1,distance:0},axisLine:{lineStyle:{color:[[.2,"#66AB31"],[.8,"#1A9348"],[1,"#21B4D2"]]}}}]},optipnTwo:{tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"业务指标",type:"gauge",radius:"85%",detail:{formatter:"{value}",fontSize:20},data:[{value:0,name:"任务漏洞量"}],title:{color:"#E4E5E5",fontSize:12},splitLine:{show:!1},axisTick:{show:!1},pointer:{show:!1},axisLabel:{show:!1,distance:0},axisLine:{lineStyle:{color:[[.2,"#66AB31"],[.8,"#1A9348"],[1,"#21B4D2"]]}}}]},optionthree:{tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"业务指标",type:"gauge",radius:"85%",detail:{formatter:"{value}%",fontSize:20},data:[{value:30,name:"漏洞利用率"}],title:{color:"#E4E5E5",fontSize:12},splitLine:{show:!1},axisTick:{show:!1},pointer:{show:!1},axisLabel:{show:!1,distance:0},axisLine:{lineStyle:{color:[[.2,"#66AB31"],[.8,"#1A9348"],[1,"#21B4D2"]]}}}]}}},computed:c()({optipnThree:function(){var t=this;return setInterval(function(){t.optionthree.series[0].data[0].value=(100*Math.random()).toFixed(2)-0},2e3),this.optionthree}},Object(f.b)(["userName"])),mounted:function(){for(var t=+new Date,e=864e5,a=1e3*Math.random(),n=0;n<80;n++)this.linechartdata.push((t=new Date(+t+e),a=a+21*Math.random()-10,{name:t.toString(),value:[[t.getFullYear(),t.getMonth()+1,t.getDate()].join("/"),Math.round(a)]}))},created:function(){var t={userName:this.userName,targetStruts:0};this._taskTargetInfo(t)},methods:{dataLoad:function(t){l()({},this.defaultPage,t)},_lineChart:function(t){g(t).then(function(t){console.log(t)})},_taskTargetInfo:function(t){var e=this;return r()(i.a.mark(function a(){var n,o;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(p.a)(t);case 2:(n=a.sent).targets.length>0&&(e.taskInfo=n.targets,e.id=n.targets[0].target_id,o=l()({},e.defaultPage,{targetId:e.id}),e._taskvulnList(o),e.option.series[0].data[0].value=Number(e.taskInfo[0].target_scaning).toFixed(2),e.$refs.completionRate.refresh(),e.$refs.taskholeNum.refresh(),e.timer=setInterval(r()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(p.a)(t);case 2:n=a.sent,e.taskInfo=n.targets,e._taskvulnList(o),e.option.series[0].data[0].value=Number(e.taskInfo[0].target_scaning).toFixed(2),e.$refs.completionRate.refresh(),e.$refs.taskholeNum.refresh();case 8:case"end":return a.stop()}},a,e)})),5e3));case 4:case"end":return a.stop()}},a,e)}))()},_timeLine:function(t){var e=this;g(t).then(function(t){e.optipnTwo.series[0].data[0].value=t.vulnNum})},getLesks:function(t){var e=this;Object(m.a)(t).then(function(t){e.optipnTwo.series[0].data[0].value=t.total})},_taskvulnList:function(t){var e=this;Object(m.a)(t).then(function(t){e.assetsList=t.rows,e.optipnTwo.series[0].data[0].value=t.total,console.log(e.optipnTwo.series[0].data[0].value)})}},destroyed:function(){clearInterval(this.timer)}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"taskSchedule"},[a("chart",{ref:"completionRate",attrs:{width:"235px",height:"235px",option:t.option,id:"completionRate"}}),t._v(" "),a("chart",{ref:"taskholeNum",attrs:{width:"235px",height:"235px",option:t.optipnTwo,id:"taskholeNum"}}),t._v(" "),a("chart",{ref:"holeUtilization",attrs:{width:"235px",height:"235px",option:t.optipnThree,id:"holeUtilization"}})],1),t._v(" "),a("div",{staticClass:"clear"}),t._v(" "),a("div",{staticClass:"line"},[a("chart",{ref:"",attrs:{width:"350px",height:"230px",option:t.linechart}})],1),t._v(" "),a("div",{staticClass:"holetable"},[a("page",{attrs:{columns:t.assetsColums,data:t.assetsList,dataTotal:t.total,loading:t.loading,width:t.width},on:{dataLoad:t.dataLoad}})],1)])},staticRenderFns:[]};var _=a("Z0/y")(k,L,!1,function(t){a("GdsT")},"data-v-00b7658e",null);e.default=_.exports},rMqN:function(t,e,a){"use strict";e.a=function(t){var e=t.userName,a=t.targetStruts;return Object(n.a)({method:"post",url:"/ZY/task/targetInfo",data:{userName:e,targetStruts:a}})};var n=a("vLgD")}});